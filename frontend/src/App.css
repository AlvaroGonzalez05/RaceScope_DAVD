/* frontend/src/App.css */

/* --- FIX ANCHO COMPLETO --- */
#root {
  max-width: none !important;
  width: 100vw;
  height: 100vh;
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

/* --- TEMA OSCURO (Default) --- */
:root {
  --bg-dark: #0a0a0a;       
  --bg-panel: #161616;      
  --bg-input: #2a2a2a;      
  
  --text-primary: #f0f0f0;  
  --text-secondary: #a0a0a0;
  --text-dim: #444;
  
  --accent-red: #ff3333;    
  --border-color: #333;
  --chart-grid: #444;
  
  --header-height: 70px;
  
  /* Color de la flecha del select (Gris claro) */
  --arrow-color: %23AAAAAA; 
}

/* --- TEMA CLARO (Override) --- */
[data-theme='light'] {
  --bg-dark: #f0f2f5;       
  --bg-panel: #ffffff;      
  --bg-input: #ffffff;      /* Fondo blanco puro para inputs */
  
  --text-primary: #1c1e21;  /* Texto negro */
  --text-secondary: #606770;
  --text-dim: #ccd0d5;
  
  --accent-red: #ff3333;    
  --border-color: #ddd;     /* Borde más suave */
  --chart-grid: #e0e0e0;
  
  /* Color de la flecha del select (Gris oscuro para contraste) */
  --arrow-color: %23555555; 
}

/* --- ESTILOS GLOBALES --- */
body {
  margin: 0;
  padding: 0;
  background-color: var(--bg-dark);
  color: var(--text-primary);
  font-family: 'Outfit', sans-serif;
  height: 100vh;
  width: 100vw;
  overflow: hidden;
  -webkit-font-smoothing: antialiased;
  transition: background-color 0.3s ease, color 0.3s ease;
}

.app-container {
  display: flex;
  flex-direction: column;
  height: 100vh;
  width: 100%;
}

/* --- HEADER --- */
.control-bar {
  height: var(--header-height);
  background-color: var(--bg-panel);
  border-bottom: 1px solid var(--border-color);
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 25px;
  flex-shrink: 0;
  box-shadow: 0 4px 15px rgba(0,0,0,0.1); /* Sombra más sutil */
  z-index: 100;
  transition: background-color 0.3s ease, border-color 0.3s ease;
}

.logo h1 {
  margin: 0;
  font-size: 1.8rem;
  font-weight: 800;
  font-style: italic;
  letter-spacing: -0.04em;
  text-transform: uppercase;
}
.logo span { color: var(--accent-red); }

.controls { display: flex; gap: 15px; }

/* --- SELECTORES CORREGIDOS --- */
.input-group {
  display: flex;
  align-items: center;
}

.select-box {
  background-color: var(--bg-input); /* Usa la variable dinámica */
  border: 1px solid var(--border-color);
  color: var(--text-primary); /* Texto dinámico (blanco/negro) */
  padding: 8px 15px;
  border-radius: 6px;
  outline: none;
  font-size: 0.95rem;
  font-family: 'Outfit', sans-serif;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s;
  
  /* Flecha dinámica usando variable CSS para el color SVG */
  appearance: none;
  background-image: url("data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22var(--arrow-color)%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13-5.4H18.4c-5%200-9.3%201.8-12.9%205.4A17.6%2017.6%200%200%200%200%2082.2c0%205%201.8%209.3%205.4%2012.9l128%20127.9c3.6%203.6%207.8%205.4%2012.8%205.4s9.2-1.8%2012.8-5.4L287%2095c3.5-3.5%205.4-7.8%205.4-12.8%200-5-1.9-9.2-5.5-12.8z%22%2F%3E%3C%2Fsvg%3E");
  background-repeat: no-repeat;
  background-position: right 12px top 50%;
  background-size: 10px auto;
  padding-right: 35px;
}

/* IMPORTANTE: Para que la variable funcione dentro de la URL del SVG en algunos navegadores, 
   a veces es mejor hardcodear el cambio de imagen en el selector de tema si falla.
   Pero primero probamos con variables de color estándar. */

.select-box:hover {
  border-color: #888;
}
.select-box:focus {
  border-color: var(--accent-red);
}

.year-select { width: 90px; }
.gp-select { width: 240px; }
.driver-select { width: 200px; }

/* Botón Start */
.btn-start {
  background: var(--accent-red);
  color: white; /* Siempre blanco, incluso en light mode */
  border: none;
  padding: 8px 25px;
  border-radius: 6px;
  font-weight: 800;
  cursor: pointer;
  font-size: 0.95rem;
  font-family: 'Outfit', sans-serif;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  transition: background 0.2s;
}
.btn-start:hover { background: #cc0000; }
.btn-start:disabled { background: var(--bg-input); color: var(--text-secondary); cursor: not-allowed; border: 1px solid var(--border-color); }

/* Toggle Button */
.theme-toggle {
  background: transparent;
  border: 1px solid var(--border-color);
  color: var(--text-primary);
  width: 40px;
  height: 40px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  font-size: 1.2rem;
  transition: all 0.2s ease;
  margin-left: 20px;
}
.theme-toggle:hover { background-color: var(--bg-input); }

/* --- DASHBOARD GRID --- */
.dashboard-grid {
  flex: 1;
  display: grid;
  grid-template-columns: 1fr 1fr; 
  grid-template-rows: 3fr 1.5fr;
  gap: 20px;
  padding: 20px;
  overflow: hidden;
  box-sizing: border-box;
}

.panel {
  background-color: var(--bg-panel);
  border: 1px solid var(--border-color);
  border-radius: 12px;
  overflow: hidden;
  display: flex;
  flex-direction: column;
  box-shadow: 0 4px 10px rgba(0,0,0,0.05);
  transition: background-color 0.3s ease, border-color 0.3s ease;
}

.panel-header {
  padding: 12px 20px;
  border-bottom: 1px solid var(--border-color);
  display: flex;
  justify-content: space-between;
  align-items: center;
  flex-shrink: 0;
  /* Fondo sutilmente diferente para la cabecera */
  background: linear-gradient(to right, rgba(128,128,128,0.05), transparent);
}
.panel-header h3 { 
  margin: 0; font-size: 0.95rem; font-weight: 700; 
  text-transform: uppercase; color: var(--text-secondary); 
  letter-spacing: 0.05em;
}

/* Áreas */
.area-telemetry { grid-column: 1 / 2; grid-row: 1 / 3; }
.area-strategy  { grid-column: 2 / 3; grid-row: 1 / 2; }
.area-circuit   { grid-column: 2 / 3; grid-row: 2 / 3; }

/* LOADING */
.loading-overlay, .empty-state {
  display: flex; justify-content: center; align-items: center;
  height: 100%; color: var(--text-secondary); font-size: 1.1rem;
  flex-direction: column; gap: 15px; font-style: italic; font-weight: 300;
}

/* Estado Base (Modo Oscuro) */
.circuit-map-img {
  max-width: 100%;
  max-height: 180px;
  transition: all 0.4s ease; /* Transición suave al cambiar de tema */
  
  /* Glow rojo brillante para destacar sobre negro */
  filter: drop-shadow(0 0 8px rgba(255, 51, 51, 0.6));
}

/* Estado Invertido (Modo Claro) */
.circuit-map-img.inverted {
  filter: invert(1) hue-rotate(180deg) contrast(1.1);
  mix-blend-mode: multiply;
  opacity: 0.9;
}